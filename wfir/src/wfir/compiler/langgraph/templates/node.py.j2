def {{ node_func_name }}(state: AgentState):
    """
    Node ID: {{ node.id }}
    Type: {{ node.type }}
    """
    print(f"--- Executing {{ node.id }} ---")
    
    # Node Definition
    node_def = json.loads("""{{ node.model_dump_json(by_alias=True, indent=2) }}""")

    # Initialize Context
    context = Context(state)

    # Resolve Inputs
    inputs = context.resolve_inputs(node_def.get("inputs", {}))
    
    # Execute Logic
    try:
        # Pass context to execute
        result = runtime.execute("{{ node.type }}", inputs, context, node_def)
    except Exception as e:
        print(f"Error executing node {{ node.id }}: {e}")
        raise e
    
    # Set Output in Context
    context.set_node_output("{{ node.id }}", result)

    # Return updates to state
    # We explicitly return the output update to satisfy LangGraph contract
    return {"{{ node.id | replace("-", "_") }}_output": result}
